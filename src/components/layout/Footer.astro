---
import { getLocalizedPath } from '@/i18n/routes';
import { useTranslations } from '@/i18n/ui';
import type { LangCode } from '@/i18n/config';

const { lang } = Astro.props;
const t = useTranslations(lang as LangCode);

const categories = [
  { key: 'cat-autopsia', label: t('cat-autopsia') },
  { key: 'cat-sistemi', label: t('cat-sistemi') },
  { key: 'cat-psicologia', label: t('cat-psicologia') },
  { key: 'cat-esecuzione', label: t('cat-esecuzione') },
] as const;

const legal = ['privacy', 'cookie', 'terms', 'security'] as const;
---

<footer class="main-footer">
  <div class="footer-container">
    <div class="footer-grid">
      <div class="footer-section brand">
        <h2 class="footer-logo">{t('nav.logo')}</h2>
        <p class="mission-text">{t('site.description')}</p>
      </div>

      <div class="footer-section">
        <span class="section-label">{t('nav.categories')}</span>
        <div class="cat-list">
          {categories.map(({ key, label }) => (
            <a href={getLocalizedPath(lang as LangCode, key as any)} class="footer-link">{label}</a>
          ))}
        </div>
      </div>

      <div class="footer-section">
        <span class="section-label">{t('footer.contact')}</span>
        <a href={`mailto:${t('contact.email')}`} class="gold-link underline">{t('contact.email')}</a>
      </div>
    </div>

    <div class="footer-bottom">
      <p class="copyright">Â© {new Date().getFullYear()} TIZIANO GASPARET. INTELLETTO E STRATEGIA.</p>
      <div class="legal-links">
        {legal.map(key => (
          <a href={getLocalizedPath(lang as LangCode, key as any)}>
            {key === 'security' ? t('security') : t(`footer.${key}` as any)}
          </a>
        ))}
      </div>
    </div>
  </div>
</footer>

<style>
.main-footer { background:#000033; padding:5rem 2.5rem 2rem; border-top:2px solid #dfd090; margin-top:auto; }
.footer-container { max-width:1440px; margin:0 auto; }
.footer-grid { display:flex; justify-content:space-between; flex-wrap:wrap; gap:3rem; padding-bottom:4rem; }
.footer-section { display:flex; flex-direction:column; gap:1.5rem; }
.footer-logo { color:#dfd090; font-size:1.25rem; font-weight:900; letter-spacing:0.2em; text-transform:uppercase; }
.mission-text { color:#fff; font-size:1rem; line-height:1.6; max-width:320px; }
.section-label { color:#dfd090; font-size:0.85rem; font-weight:900; letter-spacing:0.2em; text-transform:uppercase; }
.cat-list { display:flex; flex-direction:column; gap:0.8rem; }
.footer-link, .gold-link { color:#fff; font-size:1rem; font-weight:700; text-transform:uppercase; text-decoration:none; transition:0.3s; }
.footer-link:hover, .gold-link:hover { color:#dfd090; }
.underline { border-bottom:2px solid #dfd090; padding-bottom:2px; align-self:flex-start; }
.footer-bottom { border-top:1px solid rgba(223,208,144,0.2); padding-top:2rem; display:flex; justify-content:space-between; align-items:center; }
.copyright { font-size:0.8rem; color:rgba(255,255,255,0.6); letter-spacing:0.1em; }
.legal-links { display:flex; gap:2rem; }
.legal-links a { color:#fff; font-size:0.85rem; text-decoration:none; text-transform:uppercase; font-weight:600; }
.legal-links a:hover { color:#dfd090; }
</style>
