---
import { getLocalizedPath } from '@/i18n/routes';
import { useTranslations } from '@/i18n/ui';
import LanguageSwitcher from '../navigation/LanguageSwitcher.astro';
import Search from '../search/Search.astro';
import type { LangCode } from '@/i18n/config';

const { lang } = Astro.props;
const t = useTranslations(lang as LangCode);

const navLinks = [
  { key: 'home', label: t('nav.home') },
  { key: 'blog', label: t('nav.blog') },
  { key: 'about', label: t('nav.about') },
] as const;
---

<header class="main-header">
  <div class="header-container">
    <div class="header-left">
      <a href={getLocalizedPath(lang as LangCode, 'home')} class="logo">{t('nav.logo')}</a>
    </div>

    <nav class="header-center desktop-only">
      <ul class="nav-list">
        {navLinks.map(({ key, label }) => (
          <li>
            <a href={getLocalizedPath(lang as LangCode, key as any)} class="nav-link">{label}</a>
          </li>
        ))}
      </ul>
    </nav>

    <div class="header-right">
      <div class="actions-group">
        <LanguageSwitcher currentLang={lang as LangCode} />
        <div class="vertical-divider"></div>
        <Search lang={lang as LangCode} />
      </div>
    </div>
  </div>
</header>

<style>
.main-header { height:100px; background:#000033; border-bottom:2px solid #dfd090; display:flex; align-items:center; position:sticky; top:0; z-index:1000; }
.header-container { width:100%; max-width:1440px; margin:0 auto; padding:0 2.5rem; display:flex; justify-content:space-between; align-items:center; }
.logo { color:#dfd090; font-weight:900; letter-spacing:0.3em; text-transform:uppercase; font-size:1.25rem; text-decoration:none; }
.nav-list { display:flex; gap:4rem; list-style:none; margin:0; padding:0; }
.nav-link { color:#fff; font-size:1rem; font-weight:700; letter-spacing:0.15em; text-transform:uppercase; text-decoration:none; transition:0.3s; }
.nav-link:hover { color:#dfd090; }
.actions-group { display:flex; align-items:center; gap:2rem; }
.vertical-divider { width:1px; height:30px; background:rgba(223,208,144,0.3); }
@media (max-width:1023px) { .desktop-only { display:none; } }
</style>
