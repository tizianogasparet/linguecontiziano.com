---
import { getLocalizedPath } from '@/i18n/routes';
import Dropdown from './Dropdown.astro';
import type { LangCode } from '@/i18n/config';

interface Props { lang: LangCode; }
const { lang } = Astro.props;

const categories = [
  { key: 'cat-autopsia', label: 'AUTOPSIA' },
  { key: 'cat-sistemi', label: 'SISTEMI' },
  { key: 'cat-psicologia', label: 'PSICOLOGIA' },
  { key: 'cat-esecuzione', label: 'ESECUZIONE' },
];
---

<nav class="mobile-bar">
  <a href={getLocalizedPath(lang, 'home')} class="bar-item">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
  </a>

  <div class="bar-item">
    <Dropdown type="category" items={categories} lang={lang} isMobile />
  </div>

  <button id="mobile-search-trigger" class="bar-item">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
  </button>

  <div class="bar-item">
    <Dropdown type="language" lang={lang} isMobile />
  </div>
</nav>

<style>
  .mobile-bar {
    position: fixed; bottom: 0; left: 0; width: 100%; height: 65px;
    background: var(--bg-monolith); border-top: 1px solid var(--gold);
    display: flex; justify-content: space-around; align-items: center;
    z-index: 5000; padding-bottom: env(safe-area-inset-bottom);
  }
  .bar-item { color: var(--text-main); display: flex; align-items: center; justify-content: center; }
  @media (min-width: 1024px) { .mobile-bar { display: none; } }
</style>