---
import { getLocalizedPath } from '@/i18n/routes';
import type { LangCode } from '@/i18n/config';

interface Props {
  lang: LangCode;
}

const { lang } = Astro.props;
---

<nav class="mobile-bar">
  <a href={getLocalizedPath(lang, 'home')} class="bar-item" aria-label="Home">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>
  </a>
  <a href={getLocalizedPath(lang, 'blog')} class="bar-item" aria-label="Blog">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></svg>
  </a>
  <button id="mobile-search-trigger" class="bar-item" aria-label="Cerca">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
  </button>
</nav>

<style>
  .mobile-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 65px;
    background: #000033;
    border-top: 1px solid #dfd090;
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: 2000;
  }
  
  .bar-item {
    color: #ffffff;
    background: none;
    border: none;
    padding: 0.8rem;
    display: flex;
    align-items: center;
    transition: 0.2s;
  }
  
  .bar-item:active { color: #dfd090; transform: scale(0.9); }

  @media (min-width: 1024px) { .mobile-bar { display: none; } }
</style>

<script>
  // Padding dinamico al body per non coprire l'ultimo pezzo di pagina
  const adjustPadding = () => {
    if (window.innerWidth < 1024) {
      document.body.style.paddingBottom = '65px';
    } else {
      document.body.style.paddingBottom = '0px';
    }
  };
  window.addEventListener('resize', adjustPadding);
  adjustPadding();
</script>