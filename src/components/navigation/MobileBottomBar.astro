---
// MobileBottomBar.astro
import { getLocalizedPath } from '@/i18n/routes';
import type { LangCode } from '@/i18n/config';

import CategoryDropdown from '@/components/navigation/CategoryDropdown.astro';
import LanguageSwitcher from '@/components/navigation/LanguageSwitcher.astro';

interface Props { lang: LangCode; }
const { lang } = Astro.props;
---

<nav class="mobile-bar">
  <a href={getLocalizedPath(lang, 'home')} class="bar-item" aria-label="Home">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
      <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
    </svg>
  </a>

  <div class="bar-item" aria-label="Categorie">
    <CategoryDropdown lang={lang} />
  </div>

  <button id="mobile-search-trigger" class="bar-item" aria-label="Cerca">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
      <circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/>
    </svg>
  </button>

  <div class="bar-item" aria-label="Lingua">
    <LanguageSwitcher lang={lang} />
  </div>
</nav>

<style>
.mobile-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: var(--mobile-bar-height);
  background: var(--bg-monolith);
  border-top: 1px solid var(--gold);
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: 9999;
  padding-bottom: env(safe-area-inset-bottom);
  overflow: visible;
}

.bar-item {
  color: var(--text-main);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 25%;
  position: relative;
}

@media (min-width: 1024px) {
  .mobile-bar { display: none; }
}
</style>